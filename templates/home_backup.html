{% extends "base.html" %}
{% block content %}

<div class="alert alert-info">
    Debug: {{ tutors|length }} tutor(s) found
</div>

<div class="container mt-4">
  <h2 class="mb-4 text-center">Tutoring Hours</h2>


  {% if tutors %}
    <div class="row row-cols-1 row-cols-md-2 g-4">
      {% for tutor in tutors %}
      <div class="col">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">
              {% if tutor.user.first_name or tutor.user.last_name %}
                {{ tutor.user.first_name }} {{ tutor.user.last_name }}
              {% else %}
                {{ tutor.user.username }}
              {% endif %}
            </h5>
            
            {% if tutor.subject %}
            <h6 class="card-subtitle mb-2 text-muted">{{ tutor.subject }}</h6>
            {% endif %}
            
            {% if tutor.description %}
            <p class="card-text">{{ tutor.description }}</p>
            {% endif %}

            <!-- Availability table - show even if empty -->
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Start</th>
                  <th>End</th>
                </tr>
              </thead>
              <tbody>
                {% if tutor.mon_start %}
                <tr><td>Mon</td><td>{{ tutor.mon_start }}</td><td>{{ tutor.mon_end }}</td></tr>
                {% endif %}
                {% if tutor.tue_start %}
                <tr><td>Tue</td><td>{{ tutor.tue_start }}</td><td>{{ tutor.tue_end }}</td></tr>
                {% endif %}
                {% if tutor.wed_start %}
                <tr><td>Wed</td><td>{{ tutor.wed_start }}</td><td>{{ tutor.wed_end }}</td></tr>
                {% endif %}
                {% if tutor.thu_start %}
                <tr><td>Thur</td><td>{{ tutor.thu_start }}</td><td>{{ tutor.thu_end }}</td></tr>
                {% endif %}
                {% if tutor.fri_start %}
                <tr><td>Fri</td><td>{{ tutor.fri_start }}</td><td>{{ tutor.fri_end }}</td></tr>
                {% endif %}
                
                <!-- Show message if no availability -->
                {% if not tutor.mon_start and not tutor.tue_start and not tutor.wed_start and not tutor.thu_start and not tutor.fri_start %}
                <tr>
                  <td colspan="3" class="text-center text-muted">
                    No availability set
                  </td>
                </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center">No tutors have added hours yet.</p>
  {% endif %}
</div>

{% endblock %}